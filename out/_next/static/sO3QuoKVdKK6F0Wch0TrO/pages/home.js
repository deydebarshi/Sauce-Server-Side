(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"3D1N":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/home",function(){return n("CH2o")}])},CH2o:function(e,t,n){"use strict";n.r(t);var a=n("ODXe"),s=n("KQm4"),i=n("o0o1"),o=n.n(i),r=n("1OyB"),c=n("vuIU"),l=n("JX7q"),u=n("Ji7U"),h=n("md7G"),d=n("foSv"),f=n("rePB"),m=n("q1tI"),p=n.n(m),b=n("a2k1"),_=n.n(b),g=n("8Kt/"),v=n.n(g),y=(n("YFqc"),n("9psh")),O=n("cgUL"),S=n("mrSG"),w=n("OXR1"),j=m.forwardRef((function(e,t){return m.createElement(w.a,Object(S.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 576 512"},e,{ref:t}),m.createElement("path",{fill:"currentColor",d:"M288 0c-69.59 0-126 56.41-126 126 0 56.26 82.35 158.8 113.9 196.02 6.39 7.54 17.82 7.54 24.2 0C331.65 284.8 414 182.26 414 126 414 56.41 357.59 0 288 0zm0 168c-23.2 0-42-18.8-42-42s18.8-42 42-42 42 18.8 42 42-18.8 42-42 42zM20.12 215.95A32.006 32.006 0 000 245.66v250.32c0 11.32 11.43 19.06 21.94 14.86L160 448V214.92c-8.84-15.98-16.07-31.54-21.25-46.42L20.12 215.95zM288 359.67c-14.07 0-27.38-6.18-36.51-16.96-19.66-23.2-40.57-49.62-59.49-76.72v182l192 64V266c-18.92 27.09-39.82 53.52-59.49 76.72-9.13 10.77-22.44 16.95-36.51 16.95zm266.06-198.51L416 224v288l139.88-55.95A31.996 31.996 0 00576 426.34V176.02c0-11.32-11.43-19.06-21.94-14.86z",key:"k0"}))}));j.displayName="MapMarkedAlt";var N=n("RZAv"),k=n("EbaL"),L=n("UOvu"),x=n.n(L),C=p.a.createElement;function V(e){return function(){var t,n=Object(d.a)(e);if(M()){var a=Object(d.a)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return Object(h.a)(this,t)}}function M(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var P=function(e){Object(u.a)(n,e);var t=V(n);function n(e){return Object(r.a)(this,n),t.call(this,e)}return Object(c.a)(n,[{key:"render",value:function(){return C("div",{className:x.a.establishment_image_container},C("div",{className:x.a.establishment_image,style:{backgroundImage:"url(".concat(this.props.data.image,")")}},this.props.data.offers.length>0?this.props.data.offers.map((function(e,t){return C(E,{key:t,value_key:t,name:e.deal_name})})):C(p.a.Fragment,null)),C("p",{className:x.a.establishment_name},this.props.data.name),C("span",{style:{fontWeight:600,color:"#ddd"}},this.props.data.distance.value," ",this.props.data.distance.unit))}}]),n}(m.Component),E=function(e){Object(u.a)(n,e);var t=V(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return 0==this.props.value_key?C("span",{className:x.a.offer_deal_1},this.props.name):1==this.props.value_key?C("span",{className:x.a.offer_deal_2},this.props.name):2==this.props.value_key?C("span",{className:x.a.offer_deal_3},this.props.name):null}}]),n}(m.Component),H=n("+18s"),R=n("nOHt"),F=n.n(R),B=n("rm5t"),I=n("cXlC"),z=n("FM6K"),D=n("c1Qj"),J=n("17x9"),T=n.n(J);var X=function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};var t=Object(m.useRef)(e);Object(m.useEffect)((function(){t.current=e}),[e]),Object(m.useEffect)((function(){var e=function(e){var n;if("function"===typeof t.current&&(n=t.current(e)),e.defaultPrevented&&(e.returnValue=""),"string"===typeof n)return e.returnValue=n,n};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[])}(e.onBeforeunload),e.children};X.defaultProps={children:null},X.propTypes={children:T.a.any,onBeforeunload:T.a.func.isRequired};var A=n("VrIe"),U=n.n(A),q=n("cq0i"),G=p.a.createElement;function K(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Q=n("ZpSk"),W=n("5qO1"),Y=function(e){Object(u.a)(i,e);var t,n=(t=i,function(){var e,n=Object(d.a)(t);if(K()){var a=Object(d.a)(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return Object(h.a)(this,e)});function i(e){var t;return Object(r.a)(this,i),t=n.call(this,e),Object(f.a)(Object(l.a)(t),"updateState",(function(){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:window.location.reload(!1);case 1:case"end":return e.stop()}}),null,null,null,Promise)})),Object(f.a)(Object(l.a)(t),"updateFilter",(function(){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:t.setState({isVisible:!1}),window.location.reload(!1);case 2:case"end":return e.stop()}}),null,null,null,Promise)})),Object(f.a)(Object(l.a)(t),"onChangeLocation",(function(){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:t.setState({isLocation:!1}),window.location.reload(!1);case 2:case"end":return e.stop()}}),null,null,null,Promise)})),Object(f.a)(Object(l.a)(t),"trackScrolling",(function(){t.isBottom()&&null!=t.state.haveNextPage&&t.scrollMore(t.state.haveNextPage)})),Object(f.a)(Object(l.a)(t),"scrollMore",(function(e){var n,a,i,r,c,l;return o.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return t.setState({isScrollLoader:!0}),u.next=3,o.a.awrap(Q.GetMoreEstablishment(e));case 3:(n=u.sent).results.length>0&&(a=Object.assign({},t.state.establishments),i=Object.values(a),r=[].concat(Object(s.a)(i),Object(s.a)(n.results)),c=["id"],l=r.filter(function(e){return function(t){return function(t){return!e.has(t)&&e.add(t)}(c.map((function(e){return t[e]})).join("|"))}}(new Set)),t.setState({establishments:l}),t.setState({haveNextPage:n.next}),t.setState({isScrollLoader:!1}));case 5:case"end":return u.stop()}}),null,null,null,Promise)})),Object(f.a)(Object(l.a)(t),"closeModal",(function(){t.setState({isVisible:!1}),t.setState({isSubscribe:!1})})),Object(f.a)(Object(l.a)(t),"showLoader",(function(){t.setState({isLoader:!t.state.isLoader})})),Object(f.a)(Object(l.a)(t),"closeLocation",(function(){t.setState({isLocation:!1})})),Object(f.a)(Object(l.a)(t),"useMyLocation",(function(){window.location.reload(!1)})),Object(f.a)(Object(l.a)(t),"showSingleView",(function(e){t.setState({singleParam:e,isSingleVisible:!0})})),Object(f.a)(Object(l.a)(t),"closeSingleView",(function(){t.setState({isSingleVisible:!1})})),t.state={selected:!1,establishments:[],isVisible:!1,isLocation:!1,isSingleVisible:!1,singleParam:0,haveNextPage:null,isLoader:!1,isScrollLoader:!1,modalLoader:!0,current_lat:0,current_long:0,resultCount:0,locationName:"Current location",appIsMounted:!1,isSubscribe:!1},t.showMap=t.showMap.bind(Object(l.a)(t)),t.trackScrolling=t.trackScrolling.bind(Object(l.a)(t)),t}return Object(c.a)(i,[{key:"componentDidMount",value:function(){var e,t,n,a,s;return o.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return this.showLoader(),i.next=3,o.a.awrap(Q.GetEstablishment());case 3:void 0!=(e=i.sent)&&this.setState({establishments:e.results,haveNextPage:e.next,resultCount:e.count}),this.showLoader(),null!==(t=localStorage.getItem("mylocation"))&&(t=JSON.parse(t),n=t.split(","),this.setState({locationName:n[0]})),a=localStorage.getItem("latitude"),a=JSON.parse(a),s=localStorage.getItem("longitude"),s=JSON.parse(s),this.setState({current_lat:a,current_long:s}),window.addEventListener("scroll",this.trackScrolling);case 14:case"end":return i.stop()}}),null,this,null,Promise)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.trackScrolling)}},{key:"isBottom",value:function(){return window.innerHeight+window.scrollY>=document.body.scrollHeight-5}},{key:"showMap",value:function(){F.a.push({pathname:"/map"})}},{key:"render",value:function(){var e=this;return G(p.a.Fragment,null,G(v.a,null,G("title",null,"The sauce"),G("link",{href:"https://fonts.googleapis.com/css?family=Roboto",rel:"stylesheet"})),G("div",{className:_.a.home_container},G("div",{className:_.a.header},G("div",{className:_.a.header_container},G(y.a,{size:20,style:{marginLeft:5,color:"#fff"}}),G("span",{style:{marginLeft:5,color:"#fff"}},this.state.locationName),G("span",{className:_.a.change_loaction,onClick:function(){e.setState({isLocation:!0})}},"change"),G(O.a,{size:30,className:_.a.slider,onClick:function(){e.setState({isVisible:!0})}}),G(j,{size:30,className:_.a.mapToggle,onClick:this.showMap}))),G("div",{className:_.a.large_container},G("div",{className:_.a.large_left_container},G("div",{className:_.a.fixed},G(N.a,{updateState:this.updateState}),G(k.a,{updateState:this.updateState}))),G("div",{className:_.a.large_right_container},G("div",{className:_.a.establishment_container,id:"establishment_container"},G("div",{className:_.a.establishment_header_section},G("span",{className:_.a.establishment_header_text},"Open near you"),G("span",{className:_.a.establisment_count},this.state.resultCount," Results")),this.state.isLoader?G("div",{className:_.a.custom_loader},G("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}},G(H.Spinner,{size:"large",color:"#FFB6E4"}),G("span",{style:{marginLeft:10}},"Retrieving results"))):G(p.a.Fragment,null),Object.entries(this.state.establishments).length>0?Object.entries(this.state.establishments).map((function(t){var n=Object(a.a)(t,2),s=n[0],i=n[1];return G("a",{key:s,className:_.a.establishment_link,onClick:function(){return e.showSingleView(i.id)}},G(P,{data:i}))})):G("div",{style:{display:"flex",flexDirection:"column",height:250,justifyContent:"center",alignItems:"center",backgroundColor:"#fff",marginTop:30}},G("span",{style:{color:"#EA8CC7"}},"There is no data available...")),Object.entries(this.state.establishments).length>0&&null!=this.state.haveNextPage?G("div",{style:{display:"flex",flexDirection:"row",height:50,justifyContent:"center",alignItems:"center",marginTop:10,marginBottom:10}},G(H.Spinner,{size:"large",color:"#FFB6E4"}),G("span",{style:{marginLeft:10}},"Retrieving results")):G(p.a.Fragment,null))))),G(B.a,{isVisible:this.state.isVisible,closeModal:this.closeModal,updateFilter:this.updateFilter}),G(I.a,{isLocation:this.state.isLocation,closeLocation:this.closeLocation,onChangeLocation:this.onChangeLocation,useMyLocation:this.useMyLocation}),G(z.a,{id:this.state.singleParam,isSingleVisible:this.state.isSingleVisible,closeSingleView:this.closeSingleView}),G(D.a,{isSubscribe:this.state.isSubscribe,closeModal:this.closeModal}),G(U.a,null,G(q.a,{icon:G("img",{src:W}),mainButtonStyles:{background:"#FFB6E4"},onClick:function(){return e.setState({isSubscribe:!0})},text:"User Subscription"})))}}]),i}(m.Component);t.default=Y},a2k1:function(e,t,n){e.exports={home_container:"Home_home_container__1F1IG",header:"Home_header__c9NUl",header_container:"Home_header_container__1Tl48",change_loaction:"Home_change_loaction__19zQf",establishment_container:"Home_establishment_container__2MdyL",establishment_header_section:"Home_establishment_header_section__1iVOP",establishment_header_text:"Home_establishment_header_text__3d8dx",establishment_link:"Home_establishment_link__3JE16",custom_loader:"Home_custom_loader__351Jk",slider:"Home_slider__1zr5W",mapToggle:"Home_mapToggle__2ntbK",establisment_count:"Home_establisment_count__2dXJa",large_container:"Home_large_container__odJBu",large_right_container:"Home_large_right_container__21INc",fixed:"Home_fixed__2kXRv"}}},[["3D1N",0,2,1,3]]]);