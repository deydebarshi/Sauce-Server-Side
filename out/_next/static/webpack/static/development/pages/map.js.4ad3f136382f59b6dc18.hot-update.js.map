{"version":3,"file":"static/webpack/static\\development\\pages\\map.js.4ad3f136382f59b6dc18.hot-update.js","sources":["webpack:///./components/map/Mapview.js"],"sourcesContent":["import React,{Component} from 'react'\r\nimport Head from 'next/head'\r\nimport styles from  './Mapview.module.css'\r\nimport {Map} from '@styled-icons/boxicons-solid/Map'\r\nimport {Slider} from '@styled-icons/boxicons-regular/Slider'\r\nimport MapViewcontent from './map2'\r\nimport DayFilters from '../shared/DayFilters'\r\nimport ModalView from '../modal/modal';\r\nimport { Spinner } from 'react-activity';\r\nimport {ArrowLeft} from '@styled-icons/heroicons-solid/ArrowLeft'\r\nimport LocationView from '../location/location'\r\nimport Router from 'next/router'\r\nimport NoSSR from 'react-no-ssr'\r\nimport { Fab} from 'react-tiny-fab'\r\n\r\nlet UserIcon = require('../../public/images/add.png')\r\n\r\nconst Services = require('../../services/services')\r\n\r\nclass MapView extends Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.state={\r\n            markers: [],\r\n            isVisible: false,\r\n            isLoader : false,\r\n            resultCount : 0,\r\n            currentlat: 0,\r\n            currentlong: 0,\r\n            isLocation : false,\r\n            locationName : 'Current location'\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n    setCurrentLoc = async() =>{\r\n\r\n        let latitude = localStorage.getItem('latitude');\r\n    \r\n        latitude = JSON.parse(latitude)\r\n    \r\n        let longitude = localStorage.getItem('longitude');\r\n    \r\n        longitude = JSON.parse(longitude)\r\n        \r\n        this.setState({currentlat: latitude, currentlong: longitude})\r\n    \r\n    }\r\n\r\n\r\n\r\n    async componentDidMount(){\r\n\r\n        this.showLoader()\r\n\r\n        await this.setCurrentLoc()\r\n   \r\n        let List = await Services.GetEstablishmentMap(this.state.currentlat, this.state.currentlong)\r\n  \r\n        if(List != undefined){\r\n           this.setState({markers : [...this.state.markers, ...List]})\r\n           this.setState({resultCount: this.state.markers.length})\r\n        }\r\n\r\n        let current_location = localStorage.getItem('mylocation');\r\n        if(current_location !== null)\r\n        {\r\n            current_location = JSON.parse(current_location)\r\n            let location_name = current_location.split(',')\r\n            this.setState({locationName : location_name[0]})\r\n        }\r\n  \r\n        this.showLoader()\r\n  \r\n    }\r\n\r\n\r\n\r\n\r\n    updateState = async() => {\r\n\r\n        this.showLoader()\r\n    \r\n        let List = await Services.GetEstablishmentMap(this.state.currentlat, this.state.currentlong)\r\n    \r\n        if(List != undefined){\r\n          this.setState({markers : List})\r\n          this.setState({resultCount: this.state.markers.length})\r\n        }\r\n    \r\n        this.showLoader()\r\n    \r\n    }\r\n\r\n\r\n\r\n    onMapDrag = async(ref)=>{\r\n\r\n        this.setState({currentlat : ref.getCenter().lat(), currentlong : ref.getCenter().lng()})\r\n        \r\n        let List = await Services.GetEstablishmentMap(ref.getCenter().lat(), ref.getCenter().lng())\r\n\r\n        if(List != undefined){\r\n           this.setState({markers : List})\r\n           this.setState({resultCount: this.state.markers.length})\r\n        }\r\n        \r\n        \r\n    }\r\n\r\n\r\n    showList = () =>{\r\n        Router.push('/home')\r\n    }\r\n\r\n\r\n\r\n\r\n    updateFilter = async() =>{\r\n\r\n        this.setState({isVisible : false})\r\n    \r\n        this.showLoader()\r\n    \r\n        let List = await Services.GetEstablishmentMap(this.state.currentlat, this.state.currentlong)\r\n    \r\n        if(List != undefined){\r\n          this.setState({markers : List})\r\n          this.setState({resultCount: this.state.markers.length})\r\n        }\r\n    \r\n        this.showLoader()\r\n    }\r\n\r\n\r\n\r\n    onChangeLocation = async() =>{\r\n        this.setState({isLocation : false})  \r\n        window. location. reload(false)\r\n    }\r\n\r\n\r\n\r\n    closeModal = () =>{\r\n        this.setState({isVisible : false})\r\n    }\r\n\r\n\r\n    showLoader = () =>{\r\n        this.setState({isLoader: !this.state.isLoader})\r\n    }\r\n    \r\n\r\n    closeLocation = () =>{\r\n        this.setState({isLocation : false})\r\n    }\r\n\r\n    useMyLocation = () =>{\r\n        window.location.reload(false)\r\n    }\r\n\r\n\r\n    render(){\r\n        const {markers , currentlat, currentlong ,resultCount} = this.state\r\n\r\n        return(\r\n            <>\r\n            <Head>\r\n                <title>The sauce - Map View</title>\r\n                <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet'/>\r\n            </Head>\r\n\r\n            <div className={styles.page_container}>\r\n\r\n                <div className={styles.header}>\r\n                    <div className={styles.header_container}>\r\n                        <ArrowLeft size={25} style={{marginLeft:5, cursor: 'pointer'}} onClick={() => {this.showList()}}/>\r\n                        <Map size={20} style={{marginLeft:5, color:'#fff'}} />\r\n                        <span style={{marginLeft:5, color:'#fff'}}>{this.state.locationName}</span>\r\n                        <span className={styles.change_location} onClick = {() => {this.setState({ isLocation: true})}}>change</span>\r\n                        <Slider size={30} className={styles.slider} onClick = {() => {this.setState({ isVisible: true})}}/>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className={styles.large_container}>\r\n                    <div className={styles.large_left_container}>\r\n                        <div className={styles.map_container}> \r\n                            <MapViewcontent markers={markers} resultCount={resultCount} centerMoved={this.onMapDrag} latitude={currentlat} longitude={currentlong}/>\r\n                        </div>\r\n                    </div>\r\n                    <div className={styles.large_right_container}>\r\n                        <div className={styles.fixed}>\r\n                            <DayFilters updateState={this.updateState}/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            {\r\n                this.state.isLoader ? (\r\n                    <div className={styles.custom_loader}>\r\n        \r\n                        <div style={{display:'flex',flexDirection: 'row', justifyContent: 'center', alignItems: 'center'}}>\r\n                            <Spinner size=\"large\"  color=\"#FFB6E4\" /> \r\n                            <span style={{marginLeft:10}}>Retrieving results</span>\r\n                        </div>  \r\n        \r\n                    </div>\r\n                ) : <></>\r\n            }\r\n\r\n            <ModalView isVisible={this.state.isVisible} closeModal={this.closeModal} updateFilter={this.updateFilter}/>\r\n            <LocationView  isLocation={this.state.isLocation} closeLocation={this.closeLocation} onChangeLocation = {this.onChangeLocation} useMyLocation={this.useMyLocation}/>\r\n            <Subscribe isSubscribe={this.state.isSubscribe} closeModal={this.closeModal}/>\r\n            \r\n            <NoSSR>\r\n                <Fab\r\n                icon={<img src={UserIcon}/>}\r\n                mainButtonStyles={{\r\n                    background:'#FFB6E4'\r\n                 }\r\n                }\r\n                onClick = {()=> this.setState({isSubscribe : true})}\r\n                text=\"User Subscription\"\r\n                />\r\n            </NoSSR>\r\n            \r\n            </>\r\n\r\n        )\r\n    }\r\n}\r\nexport default MapView"],"mappings":"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","sourceRoot":""}